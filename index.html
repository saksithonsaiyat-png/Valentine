<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My Valentine</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Mali for cute handwriting look -->
    <link href="https://fonts.googleapis.com/css2?family=Mali:ital,wght@0,300;0,400;0,600;0,700;1,300&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        body {
            font-family: 'Mali', cursive;
            background: linear-gradient(180deg, #ffe4e6 0%, #fda4af 100%);
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* Glassmorphism Card */
        .glass-card {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 10px 40px rgba(244, 63, 94, 0.15);
        }

        .btn-primary {
            background: linear-gradient(135deg, #be123c 0%, #fb7185 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(190, 18, 60, 0.3);
            transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .btn-primary:active {
            transform: scale(0.92);
        }

        /* --- ANIMATIONS --- */
        .bg-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
            pointer-events: none;
        }
        .bg-heart {
            position: absolute;
            bottom: -50px;
            background-color: rgba(255, 255, 255, 0.4);
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='black'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E");
            -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='black'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E");
            mask-size: contain;
            -webkit-mask-size: contain;
            animation: floatUp linear infinite;
        }
        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            100% { transform: translateY(-120vh) rotate(360deg); opacity: 0; }
        }

        .stagger-in > * {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }
        .stagger-in > *:nth-child(1) { animation-delay: 0.1s; }
        .stagger-in > *:nth-child(2) { animation-delay: 0.2s; }
        .stagger-in > *:nth-child(3) { animation-delay: 0.3s; }
        .stagger-in > *:nth-child(4) { animation-delay: 0.4s; }
        .stagger-in > *:nth-child(5) { animation-delay: 0.5s; }

        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
        @keyframes heartbeat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .heart-beat { animation: heartbeat 1.5s ease-in-out infinite; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        .shake { animation: shake 0.4s ease-in-out; }
        @keyframes spin-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .spin-record { animation: spin-slow 8s linear infinite; }
        .paused { animation-play-state: paused; }

        .page {
            display: none; opacity: 0; transition: opacity 0.4s ease;
            width: 100%; height: 100vh; position: absolute; top: 0; left: 0;
            overflow-y: auto; padding: 20px; box-sizing: border-box;
            scrollbar-width: none; -ms-overflow-style: none;
        }
        .page::-webkit-scrollbar { display: none; }
        .page.active { display: flex; flex-direction: column; align-items: center; justify-content: center; opacity: 1; z-index: 10; }

        .envelope-wrapper { perspective: 1000px; }
        .envelope-wrapper.open .flap { transform: rotateX(180deg); z-index: 0; }
        .envelope-wrapper.open .letter { transform: translateY(-60px); z-index: 20; transition-delay: 0.4s; }
        .flap { transform-origin: top; transition: transform 0.6s ease-in-out, z-index 0.6s; z-index: 10; }
        .letter { transition: transform 0.6s ease-in-out; z-index: 5; }
    </style>
</head>
<body class="text-gray-700 antialiased select-none">

    <div class="bg-hearts" id="bg-hearts"></div>

    <!-- PAGE 1: HOME -->
    <div id="page-home" class="page active">
        <div class="glass-card p-8 w-full max-w-sm text-center flex flex-col items-center stagger-in">
            <div class="mb-6 relative">
                <div class="absolute inset-0 bg-rose-400 blur-2xl opacity-20 rounded-full animate-pulse"></div>
                <svg xmlns="http://www.w3.org/2000/svg" width="90" height="90" viewBox="0 0 24 24" fill="#be123c" stroke="#9f1239" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="drop-shadow-lg heart-beat relative z-10"><path d="M19 14c1.49-1.28 3.6-2.34 3.6-4.44C22.59 7.05 20.35 4.8 17.82 4.8c-1.68 0-3.3 1.05-4.32 2.76C12.48 5.85 10.86 4.8 9.18 4.8 6.65 4.8 4.41 7.05 4.41 9.56c0 2.1 2.11 3.16 3.6 4.44l3.75 3.32a2.25 2.25 0 0 0 3.48 0L19 14z"></path><path d="M12 5v14"></path><path d="m15 13 4 2"></path><path d="m9 13-4 2"></path></svg>
            </div>
            <h1 class="text-4xl font-bold text-rose-700 mb-2 drop-shadow-sm">My Valentine</h1>
            <p class="text-rose-500 text-sm mb-8 tracking-widest">FOR THE ONE I LOVE</p>
            <div class="bg-white/40 rounded-2xl p-6 mb-8 w-full border border-white/50 backdrop-blur-sm">
                <p class="text-rose-800 font-medium text-base leading-loose">
                    "‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏ß‡∏≤‡πÄ‡∏•‡∏ô‡πÑ‡∏ó‡∏ô‡πå‡∏õ‡∏µ‡∏ô‡∏µ‡πâ<br>‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ<br>‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô" ‚ù§Ô∏è
                </p>
            </div>
            <button onclick="navigateTo('page-passcode')" class="btn-primary w-full py-4 rounded-2xl font-bold text-lg shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all">‡∏î‡∏π‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏ß‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</button>
        </div>
    </div>

    <!-- PAGE 2: PASSCODE -->
    <div id="page-passcode" class="page">
        <div class="glass-card p-6 w-full max-w-sm text-center flex flex-col items-center stagger-in">
            <div class="mb-4"><div class="w-16 h-16 bg-gradient-to-br from-rose-400 to-rose-600 rounded-2xl flex items-center justify-center mx-auto shadow-lg mb-2"><i data-lucide="lock" class="text-white w-8 h-8"></i></div></div>
            <h2 class="text-xl font-bold text-rose-800 mb-1">‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h2>
            <p class="text-xs text-rose-500 mb-6 bg-rose-50 px-3 py-1 rounded-full border border-rose-100">‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ : ‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏∑‡∏≠ 180868</p>
            <div id="dots-container" class="flex gap-3 mb-8 justify-center">
                <div class="w-10 h-12 border-2 border-rose-200 rounded-xl flex items-center justify-center text-xl font-bold text-rose-600 bg-white/80 transition-all duration-200" id="digit-0"></div>
                <div class="w-10 h-12 border-2 border-rose-200 rounded-xl flex items-center justify-center text-xl font-bold text-rose-600 bg-white/80 transition-all duration-200" id="digit-1"></div>
                <div class="w-10 h-12 border-2 border-rose-200 rounded-xl flex items-center justify-center text-xl font-bold text-rose-600 bg-white/80 transition-all duration-200" id="digit-2"></div>
                <div class="w-10 h-12 border-2 border-rose-200 rounded-xl flex items-center justify-center text-xl font-bold text-rose-600 bg-white/80 transition-all duration-200" id="digit-3"></div>
                <div class="w-10 h-12 border-2 border-rose-200 rounded-xl flex items-center justify-center text-xl font-bold text-rose-600 bg-white/80 transition-all duration-200" id="digit-4"></div>
                <div class="w-10 h-12 border-2 border-rose-200 rounded-xl flex items-center justify-center text-xl font-bold text-rose-600 bg-white/80 transition-all duration-200" id="digit-5"></div>
            </div>
            <div class="grid grid-cols-3 gap-3 w-full max-w-[280px]">
                <button onclick="enterDigit(1)" class="h-14 bg-white/60 rounded-xl text-xl font-bold text-rose-800 shadow-sm active:bg-rose-100 transition-colors">1</button>
                <button onclick="enterDigit(2)" class="h-14 bg-white/60 rounded-xl text-xl font-bold text-rose-800 shadow-sm active:bg-rose-100 transition-colors">2</button>
                <button onclick="enterDigit(3)" class="h-14 bg-white/60 rounded-xl text-xl font-bold text-rose-800 shadow-sm active:bg-rose-100 transition-colors">3</button>
                <button onclick="enterDigit(4)" class="h-14 bg-white/60 rounded-xl text-xl font-bold text-rose-800 shadow-sm active:bg-rose-100 transition-colors">4</button>
                <button onclick="enterDigit(5)" class="h-14 bg-white/60 rounded-xl text-xl font-bold text-rose-800 shadow-sm active:bg-rose-100 transition-colors">5</button>
                <button onclick="enterDigit(6)" class="h-14 bg-white/60 rounded-xl text-xl font-bold text-rose-800 shadow-sm active:bg-rose-100 transition-colors">6</button>
                <button onclick="enterDigit(7)" class="h-14 bg-white/60 rounded-xl text-xl font-bold text-rose-800 shadow-sm active:bg-rose-100 transition-colors">7</button>
                <button onclick="enterDigit(8)" class="h-14 bg-white/60 rounded-xl text-xl font-bold text-rose-800 shadow-sm active:bg-rose-100 transition-colors">8</button>
                <button onclick="enterDigit(9)" class="h-14 bg-white/60 rounded-xl text-xl font-bold text-rose-800 shadow-sm active:bg-rose-100 transition-colors">9</button>
                <button onclick="deleteDigit()" class="h-14 bg-rose-100/50 rounded-xl text-sm font-bold text-rose-800 shadow-sm active:bg-rose-200 flex items-center justify-center transition-colors"><i data-lucide="delete" class="w-5 h-5"></i></button>
                <button onclick="enterDigit(0)" class="h-14 bg-white/60 rounded-xl text-xl font-bold text-rose-800 shadow-sm active:bg-rose-100 transition-colors">0</button>
                <button onclick="checkPasscode()" class="h-14 bg-rose-500 rounded-xl text-sm font-bold text-white shadow-md active:bg-rose-600 flex items-center justify-center transition-colors">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
            </div>
            <p id="passcode-error" class="text-red-500 text-xs mt-4 h-4 opacity-0 transition-opacity">‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏∞</p>
        </div>
    </div>

    <!-- PAGE 3: SCRATCH CARD -->
    <div id="page-secret" class="page">
        <div class="glass-card p-6 w-full max-w-sm text-center flex flex-col items-center stagger-in">
            <h2 class="text-2xl font-bold text-rose-800 mb-2">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</h2>
            <p class="text-rose-500 text-sm mb-6 bg-white/50 px-4 py-1 rounded-full">‡∏Ç‡∏π‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</p>
            <div class="relative w-64 h-72 rounded-2xl overflow-hidden shadow-xl bg-white mb-6 ring-4 ring-white/50">
                <div class="absolute inset-0 flex flex-col items-center justify-center bg-rose-50">
                    <!-- üü¢ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà (Scratch Card) ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ -->
                    <img src="https://images.unsplash.com/photo-1518568814500-bf0f8d125f46?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80" class="w-full h-full object-cover opacity-90" alt="Couple">
                    <div class="absolute inset-0 flex flex-col items-center justify-center bg-black/20 p-4">
                        <div class="bg-white/90 backdrop-blur-md p-4 rounded-xl shadow-lg transform rotate-[-2deg]">
                            <h3 class="text-rose-600 font-bold text-lg">Happy Valentine's Day</h3>
                            <p class="text-xs text-rose-400 mt-1">‡πÅ‡∏Ñ‡πà‡∏°‡∏µ‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏Å‡πá‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÅ‡∏•‡πâ‡∏ß</p>
                        </div>
                    </div>
                </div>
                <canvas id="scratch-canvas" class="absolute inset-0 w-full h-full cursor-pointer z-10 touch-none"></canvas>
            </div>
            <p class="text-rose-400 text-xs mb-6 animate-pulse">‡πÉ‡∏ä‡πâ‡∏ô‡∏¥‡πâ‡∏ß‡∏ñ‡∏π‡πÄ‡∏ö‡∏≤‡πÜ ‡∏ö‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</p>
            <button onclick="navigateTo('page-menu')" class="btn-primary px-10 py-3 rounded-full font-bold shadow-lg text-sm">‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏°‡∏ô‡∏π</button>
        </div>
    </div>

    <!-- PAGE 4: MAIN MENU -->
    <div id="page-menu" class="page">
        <div class="glass-card p-6 w-full max-w-sm text-center stagger-in">
            <h2 class="text-2xl font-bold text-rose-800 mb-8">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π</h2>
            <div class="grid grid-cols-2 gap-4 mb-8">
                <div onclick="navigateTo('page-memories')" class="bg-white/70 hover:bg-white p-4 rounded-2xl shadow-sm hover:shadow-md active:scale-95 transition-all cursor-pointer flex flex-col items-center justify-center h-32 group">
                    <div class="w-12 h-12 bg-rose-100 group-hover:bg-rose-200 rounded-2xl flex items-center justify-center mb-3 transition-colors"><i data-lucide="image" class="text-rose-500 w-6 h-6"></i></div>
                    <h3 class="font-bold text-rose-700 text-sm">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥</h3>
                    <p class="text-[10px] text-gray-400">‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏ß‡πÄ‡∏•‡πá‡∏Å‡πÜ</p>
                </div>
                <div onclick="navigateTo('page-letter')" class="bg-white/70 hover:bg-white p-4 rounded-2xl shadow-sm hover:shadow-md active:scale-95 transition-all cursor-pointer flex flex-col items-center justify-center h-32 group">
                    <div class="w-12 h-12 bg-rose-100 group-hover:bg-rose-200 rounded-2xl flex items-center justify-center mb-3 transition-colors"><i data-lucide="mail-heart" class="text-rose-500 w-6 h-6"></i></div>
                    <h3 class="font-bold text-rose-700 text-sm">‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢</h3>
                    <p class="text-[10px] text-gray-400">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡πÉ‡∏à</p>
                </div>
                <div onclick="resetQuiz(); navigateTo('page-quiz')" class="bg-white/70 hover:bg-white p-4 rounded-2xl shadow-sm hover:shadow-md active:scale-95 transition-all cursor-pointer flex flex-col items-center justify-center h-32 group">
                    <div class="w-12 h-12 bg-rose-100 group-hover:bg-rose-200 rounded-2xl flex items-center justify-center mb-3 transition-colors"><i data-lucide="help-circle" class="text-rose-500 w-6 h-6"></i></div>
                    <h3 class="font-bold text-rose-700 text-sm">‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</h3>
                    <p class="text-[10px] text-gray-400">‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡πÄ‡∏£‡∏≤‡∏î‡∏µ‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô</p>
                </div>
                <div onclick="navigateTo('page-timer')" class="bg-white/70 hover:bg-white p-4 rounded-2xl shadow-sm hover:shadow-md active:scale-95 transition-all cursor-pointer flex flex-col items-center justify-center h-32 group">
                    <div class="w-12 h-12 bg-rose-100 group-hover:bg-rose-200 rounded-2xl flex items-center justify-center mb-3 transition-colors"><i data-lucide="clock" class="text-rose-500 w-6 h-6"></i></div>
                    <h3 class="font-bold text-rose-700 text-sm">‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</h3>
                    <p class="text-[10px] text-gray-400">‡∏Ñ‡∏ö‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏ô‡∏≤‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà</p>
                </div>
                <div onclick="navigateTo('page-polaroid')" class="bg-white/70 hover:bg-white p-4 rounded-2xl shadow-sm hover:shadow-md active:scale-95 transition-all cursor-pointer flex flex-col items-center justify-center h-32 group">
                    <div class="w-12 h-12 bg-rose-100 group-hover:bg-rose-200 rounded-2xl flex items-center justify-center mb-3 transition-colors"><i data-lucide="camera" class="text-rose-500 w-6 h-6"></i></div>
                    <h3 class="font-bold text-rose-700 text-sm">‡∏ñ‡πà‡∏≤‡∏¢‡πÇ‡∏û‡∏•‡∏≤‡∏£‡∏≠‡∏¢‡∏î‡πå</h3>
                    <p class="text-[10px] text-gray-400">‡πÄ‡∏Å‡πá‡∏ö‡∏†‡∏≤‡∏û‡πÄ‡∏£‡∏≤</p>
                </div>
                 <div onclick="navigateTo('page-music')" class="bg-white/70 hover:bg-white p-4 rounded-2xl shadow-sm hover:shadow-md active:scale-95 transition-all cursor-pointer flex flex-col items-center justify-center h-32 group">
                    <div class="w-12 h-12 bg-rose-100 group-hover:bg-rose-200 rounded-2xl flex items-center justify-center mb-3 transition-colors"><i data-lucide="music" class="text-rose-500 w-6 h-6"></i></div>
                    <h3 class="font-bold text-rose-700 text-sm">‡πÄ‡∏û‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</h3>
                    <p class="text-[10px] text-gray-400">‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏•‡∏á‡∏ô‡∏µ‡πâ</p>
                </div>
            </div>
            <button onclick="navigateTo('page-home')" class="px-6 py-2 text-rose-500 text-sm hover:text-rose-700 transition-colors"><i data-lucide="arrow-left" class="inline w-4 h-4 mr-1"></i> ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
        </div>
    </div>

    <!-- FEATURE: MEMORIES -->
    <div id="page-memories" class="page">
        <div class="glass-card p-6 w-full max-w-sm flex flex-col items-center stagger-in">
            <h2 class="text-xl font-bold text-rose-800 mb-4 flex items-center gap-2"><i data-lucide="image" class="w-5 h-5"></i> ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥</h2>
            <div class="relative w-full aspect-square bg-gray-100 rounded-2xl overflow-hidden mb-6 shadow-md group">
                <img id="memory-img" src="" class="w-full h-full object-cover transition-all duration-700 transform hover:scale-105">
                <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-60"></div>
                <button onclick="prevMemory()" class="absolute left-3 top-1/2 -translate-y-1/2 bg-white/20 backdrop-blur-md p-2 rounded-full hover:bg-white/40 text-white transition-all"><i data-lucide="chevron-left" class="w-6 h-6"></i></button>
                <button onclick="nextMemory()" class="absolute right-3 top-1/2 -translate-y-1/2 bg-white/20 backdrop-blur-md p-2 rounded-full hover:bg-white/40 text-white transition-all"><i data-lucide="chevron-right" class="w-6 h-6"></i></button>
            </div>
            <div class="text-center w-full mb-6">
                <h3 id="memory-title" class="font-bold text-rose-700 text-xl mb-2">‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å...</h3>
                <p id="memory-desc" class="text-gray-500 text-sm font-light">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥...</p>
            </div>
            <div class="flex gap-2 mb-6" id="memory-dots">
                <!-- Dots injected by JS -->
            </div>
            <button onclick="navigateTo('page-menu')" class="bg-rose-100 text-rose-600 px-6 py-2 rounded-full text-sm font-bold hover:bg-rose-200 transition-colors">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏°‡∏ô‡∏π</button>
        </div>
    </div>

    <!-- FEATURE: LETTER -->
    <div id="page-letter" class="page">
        <div class="glass-card p-6 w-full max-w-sm flex flex-col items-center stagger-in">
            <h2 class="text-xl font-bold text-rose-800 mb-2">‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡πÄ‡∏ò‡∏≠</h2>
            <p class="text-xs text-rose-400 mb-12 bg-white/50 px-3 py-1 rounded-full">‡∏Å‡∏î‡∏ó‡∏µ‡πà‡∏ã‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡πà‡∏≤‡∏ô</p>
            <div class="envelope-wrapper relative w-72 h-48 cursor-pointer mb-24" onclick="toggleLetter(this)">
                <div class="absolute bottom-0 w-full h-full bg-rose-500 rounded-b-xl shadow-2xl z-10"></div>
                <div class="absolute bottom-0 w-full h-full bg-rose-600 rounded-b-xl clip-path-triangle z-20" style="clip-path: polygon(0 0, 50% 50%, 100% 0, 100% 100%, 0 100%); opacity: 0.3"></div>
                <div class="flap absolute top-0 w-full h-1/2 bg-rose-700 rounded-t-xl origin-top" style="clip-path: polygon(0 0, 100% 0, 50% 100%); height: 100%;"></div>
                <div class="letter absolute bottom-2 left-2 right-2 top-4 bg-white p-6 rounded-lg shadow-sm flex flex-col items-center justify-center text-center border border-gray-100">
                    <i data-lucide="heart" class="text-rose-500 w-5 h-5 mb-3 fill-current animate-pulse"></i>
                    <p class="text-xs text-gray-600 leading-relaxed font-medium">"‡πÄ‡∏£‡∏≤‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏π‡∏î‡∏Ñ‡∏≥‡∏´‡∏ß‡∏≤‡∏ô‡πÄ‡∏Å‡πà‡∏á ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏Å‡πà‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏≠‡∏Å‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà ‡πÅ‡∏ï‡πà‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ ‡πÇ‡∏•‡∏Å‡∏°‡∏±‡∏ô‡∏î‡∏π‡∏≠‡πà‡∏≠‡∏ô‡πÇ‡∏¢‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏™‡∏°‡∏≠... ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏Å‡∏Å‡∏±‡∏ô‡∏ô‡∏∞"</p>
                    <p class="text-[10px] text-rose-400 mt-4 w-full text-right font-bold">- ‡∏£‡∏±‡∏Å‡πÄ‡∏ò‡∏≠‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î -</p>
                </div>
            </div>
            <button onclick="navigateTo('page-menu')" class="bg-rose-100 text-rose-600 px-6 py-2 rounded-full text-sm font-bold hover:bg-rose-200 transition-colors mt-6">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏°‡∏ô‡∏π</button>
        </div>
    </div>

    <!-- FEATURE: QUIZ -->
    <div id="page-quiz" class="page">
        <div class="glass-card p-6 w-full max-w-sm flex flex-col items-center stagger-in">
            <div class="w-full flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold text-rose-800">‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡πÄ‡∏£‡∏≤‡∏î‡∏µ‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô</h2>
                <span class="text-xs bg-rose-100 text-rose-600 px-2 py-1 rounded-md font-bold">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà <span id="quiz-current">1</span>/5</span>
            </div>
            <div class="w-full bg-white rounded-2xl p-8 mb-6 text-center shadow-sm relative min-h-[120px] flex items-center justify-center">
                <div class="absolute -top-3 -left-3 bg-rose-500 text-white p-2 rounded-full shadow-md"><i data-lucide="help-circle" class="w-4 h-4"></i></div>
                <p id="quiz-question" class="text-gray-700 font-bold text-lg leading-relaxed">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà?</p>
            </div>
            <div id="quiz-options" class="w-full flex flex-col gap-3 mb-4"></div>
             <div id="quiz-result" class="hidden absolute inset-0 bg-white/95 backdrop-blur-xl z-20 flex-col items-center justify-center rounded-24 transition-opacity duration-300">
                <div class="text-6xl mb-4 animate-bounce">üèÜ</div>
                <h3 class="text-2xl font-bold text-rose-600 mb-2">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏ò‡∏≠</h3>
                <div class="text-5xl font-bold text-gray-800 mb-2"><span id="quiz-score-display">0</span><span class="text-2xl text-gray-400">/5</span></div>
                <p id="quiz-msg" class="text-rose-400 text-sm mb-8">‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å!</p>
                <button onclick="navigateTo('page-menu')" class="btn-primary px-8 py-3 rounded-full text-sm font-bold shadow-lg">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏°‡∏ô‡∏π</button>
             </div>
        </div>
    </div>

    <!-- FEATURE: TIMER -->
    <div id="page-timer" class="page">
        <div class="glass-card p-6 w-full max-w-sm flex flex-col items-center stagger-in text-center">
            <div class="w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center mb-4 animate-[pulse_3s_infinite]"><i data-lucide="heart" class="text-rose-500 w-8 h-8 fill-rose-500 heart-beat"></i></div>
            <h2 class="text-xl font-bold text-rose-800 mb-1">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</h2>
            <p class="text-xs text-rose-400 mb-8">‡∏ô‡∏±‡∏ö‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏Ñ‡∏ö‡∏Å‡∏±‡∏ô</p>
            <div class="bg-gradient-to-r from-rose-500 to-pink-500 text-white w-full rounded-2xl p-6 mb-6 shadow-lg relative overflow-hidden">
                <div class="absolute top-0 right-0 p-4 opacity-10"><i data-lucide="calendar" class="w-16 h-16"></i></div>
                <div class="relative z-10"><span class="text-sm opacity-90 block mb-1">‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß...</span><div class="flex items-baseline justify-center gap-2"><span id="timer-days" class="text-6xl font-bold tracking-tighter">0</span><span class="text-xl">‡∏ß‡∏±‡∏ô</span></div></div>
            </div>
            <div class="grid grid-cols-3 gap-3 w-full mb-8">
                <div class="bg-white/60 p-3 rounded-xl flex flex-col items-center shadow-sm"><span id="timer-hours" class="text-2xl font-bold text-rose-600">00</span><span class="text-[10px] text-gray-500 uppercase">‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</span></div>
                <div class="bg-white/60 p-3 rounded-xl flex flex-col items-center shadow-sm"><span id="timer-minutes" class="text-2xl font-bold text-rose-600">00</span><span class="text-[10px] text-gray-500 uppercase">‡∏ô‡∏≤‡∏ó‡∏µ</span></div>
                <div class="bg-white/60 p-3 rounded-xl flex flex-col items-center shadow-sm"><span id="timer-seconds" class="text-2xl font-bold text-rose-600">00</span><span class="text-[10px] text-gray-500 uppercase">‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</span></div>
            </div>
            <p class="text-xs text-gray-400 italic mb-6">"‡∏ó‡∏∏‡∏Å‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡πÄ‡∏ò‡∏≠"</p>
            <button onclick="navigateTo('page-menu')" class="bg-white text-rose-500 border border-rose-200 w-full py-3 rounded-full text-sm font-bold hover:bg-rose-50 transition-colors">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏°‡∏ô‡∏π</button>
        </div>
    </div>

    <!-- FEATURE: POLAROID -->
    <div id="page-polaroid" class="page">
        <div class="glass-card p-6 w-full max-w-sm flex flex-col items-center stagger-in">
            <h2 class="text-xl font-bold text-rose-800 mb-1">‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÇ‡∏û‡∏•‡∏≤‡∏£‡∏≠‡∏¢‡∏î‡πå</h2>
            <p class="text-xs text-rose-500 mb-6">‡πÄ‡∏Å‡πá‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÑ‡∏ß‡πâ</p>
            <div id="camera-view" class="w-64 h-80 bg-gray-800 rounded-lg relative flex items-center justify-center overflow-hidden mb-8 border-[6px] border-white shadow-xl ring-1 ring-gray-200">
                <div class="text-center group"><i data-lucide="camera" class="w-12 h-12 text-gray-500 mx-auto mb-2 group-hover:text-white transition-colors"></i><p class="text-gray-500 text-xs">Lens View</p></div>
                <div id="shutter-flash" class="absolute inset-0 bg-white opacity-0 pointer-events-none transition-opacity duration-150 z-20"></div>
                <img id="polaroid-result" src="https://images.unsplash.com/photo-1529634597503-139d3726d515?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80" class="absolute inset-0 w-full h-full object-cover hidden z-10 transition-transform duration-[5s] hover:scale-110">
                 <div class="absolute bottom-4 left-0 w-full text-center z-10 pointer-events-none"><p class="text-white/80 text-[10px] tracking-widest font-light drop-shadow-md hidden" id="polaroid-date">VALENTINE 2025</p></div>
            </div>
            <button id="btn-snap" onclick="takePhoto()" class="btn-primary w-16 h-16 rounded-full font-bold shadow-lg flex items-center justify-center border-4 border-rose-200 active:border-rose-400 transition-all mb-4"><i data-lucide="aperture" class="w-8 h-8"></i></button>
            <p class="text-xs text-gray-400">‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û</p>
            <button onclick="resetPolaroid(); navigateTo('page-menu')" class="mt-6 text-sm text-rose-500 font-bold hover:underline">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏°‡∏ô‡∏π</button>
        </div>
    </div>

     <!-- FEATURE: MUSIC -->
     <div id="page-music" class="page">
        <div class="glass-card p-6 w-full max-w-sm flex flex-col items-center stagger-in">
            <h2 class="text-xl font-bold text-rose-800 mb-1">‡πÄ‡∏û‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</h2>
            <p class="text-xs text-rose-500 mb-8">‡πÄ‡∏û‡∏•‡∏á‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡∏ü‡∏±‡∏á</p>
            <div class="relative w-64 h-64 rounded-full bg-zinc-900 border-4 border-gray-800 shadow-2xl flex items-center justify-center mb-8 spin-record paused ring-4 ring-rose-100" id="vinyl">
                <div class="absolute inset-0 rounded-full bg-gradient-to-tr from-white/10 to-transparent pointer-events-none"></div>
                <div class="absolute inset-2 rounded-full border border-gray-800 opacity-50"></div>
                <div class="absolute inset-6 rounded-full border border-gray-800 opacity-50"></div>
                <div class="absolute inset-10 rounded-full border border-gray-800 opacity-50"></div>
                <div class="absolute inset-14 rounded-full border border-gray-800 opacity-50"></div>
                <div class="w-28 h-28 rounded-full bg-rose-200 overflow-hidden border-4 border-zinc-800 relative z-10">
                    <!-- üü¢ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏Å‡πÄ‡∏û‡∏•‡∏á (Vinyl Cover) ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ -->
                    <img src="https://images.unsplash.com/photo-1516280440614-6697288d5d38?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80" class="w-full h-full object-cover">
                </div>
            </div>
            <div class="bg-white/60 p-4 rounded-xl text-center mb-6 w-full shadow-sm">
                <div class="flex items-center justify-center gap-2 mb-2"><span class="w-1 h-4 bg-rose-400 rounded-full animate-[bounce_1s_infinite]"></span><span class="w-1 h-6 bg-rose-500 rounded-full animate-[bounce_1.2s_infinite]"></span><span class="w-1 h-3 bg-rose-400 rounded-full animate-[bounce_0.8s_infinite]"></span></div>
                <p class="text-xs text-gray-600 leading-relaxed italic">"‡πÄ‡∏û‡∏•‡∏á‡∏ô‡∏µ‡πâ‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏Ñ‡∏£ <br>‡πÅ‡∏ï‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏≤‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠"</p>
            </div>
            <!-- üü¢ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏•‡∏¥‡∏á‡∏Å‡πå YouTube ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ (href) -->
            <a href="https://www.youtube.com/watch?v=k-VdXXu8VqQ" target="_blank" onclick="playMusicState()" class="btn-primary w-full py-3 rounded-full font-bold shadow-lg mb-2 flex items-center justify-center gap-2 hover:scale-105 transition-transform"><i data-lucide="play-circle" class="w-5 h-5"></i> ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏•‡∏á‡∏ô‡∏µ‡πâ‡∏ö‡∏ô YouTube</a>
            <button onclick="navigateTo('page-menu')" class="bg-white text-rose-500 w-full py-2 rounded-full text-sm font-bold shadow-sm hover:bg-rose-50">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏°‡∏ô‡∏π</button>
        </div>
    </div>


    <!-- ================= JAVASCRIPT ================= -->
    <script>
        lucide.createIcons();

        // --- BACKGROUND HEARTS ---
        function createFloatingHearts() {
            const container = document.getElementById('bg-hearts');
            const heartCount = 15; 
            for(let i=0; i<heartCount; i++) {
                const heart = document.createElement('div'); heart.classList.add('bg-heart');
                const left = Math.random() * 100; const duration = Math.random() * 10 + 10; const delay = Math.random() * 10; const scale = Math.random() * 0.5 + 0.5;
                heart.style.left = `${left}%`; heart.style.animationDuration = `${duration}s`; heart.style.animationDelay = `${delay}s`; heart.style.transform = `scale(${scale})`;
                container.appendChild(heart);
            }
        }
        createFloatingHearts();

        // --- NAVIGATION ---
        function navigateTo(pageId) {
            const currentActive = document.querySelector('.page.active');
            if(currentActive && currentActive.id === pageId) return;
            if(currentActive) {
                currentActive.style.opacity = 0; currentActive.classList.remove('active');
                setTimeout(() => { currentActive.style.display = 'none'; showNewPage(pageId); }, 400); 
            } else { showNewPage(pageId); }
        }
        function showNewPage(pageId) {
            const target = document.getElementById(pageId);
            target.style.display = 'flex'; void target.offsetWidth; target.style.opacity = 1; target.classList.add('active');
            if(pageId === 'page-secret') initScratchCard();
            if(pageId === 'page-timer') startTimer();
        }

        // --- PASSCODE ---
        let currentPasscode = "";
        const correctPasscode = "180868"; // üü¢ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
        function enterDigit(digit) {
            if (currentPasscode.length < 6) {
                currentPasscode += digit; updatePasscodeUI();
                if(navigator.vibrate) navigator.vibrate(50);
            }
        }
        function deleteDigit() { currentPasscode = currentPasscode.slice(0, -1); updatePasscodeUI(); document.getElementById('passcode-error').style.opacity = 0; }
        function updatePasscodeUI() {
            for (let i = 0; i < 6; i++) {
                const el = document.getElementById(`digit-${i}`);
                if (i < currentPasscode.length) { el.textContent = currentPasscode[i]; el.classList.add('bg-rose-100', 'border-rose-400', 'text-rose-700', 'scale-110'); el.classList.remove('bg-white/80', 'border-rose-200'); } 
                else { el.textContent = ""; el.classList.remove('bg-rose-100', 'border-rose-400', 'text-rose-700', 'scale-110'); el.classList.add('bg-white/80', 'border-rose-200'); }
            }
        }
        function checkPasscode() {
            if (currentPasscode === correctPasscode) {
                confetti({ particleCount: 150, spread: 80, origin: { y: 0.6 }, colors: ['#fb7185', '#be123c', '#ffffff'] });
                navigateTo('page-secret');
            } else {
                const dots = document.getElementById('dots-container'); dots.classList.add('shake');
                const err = document.getElementById('passcode-error'); err.style.opacity = 1;
                if(navigator.vibrate) navigator.vibrate([100, 50, 100]);
                setTimeout(() => dots.classList.remove('shake'), 400);
                currentPasscode = ""; updatePasscodeUI();
            }
        }

        // --- SCRATCH CARD ---
        function initScratchCard() {
            const canvas = document.getElementById('scratch-canvas'); if(!canvas) return;
            const ctx = canvas.getContext('2d'); const parent = canvas.parentElement;
            canvas.width = parent.offsetWidth; canvas.height = parent.offsetHeight;
            ctx.fillStyle = '#fdf2f8'; ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#fbcfe8';
            for(let i=0; i<30; i++) {
                const x = Math.random() * canvas.width; const y = Math.random() * canvas.height; const size = Math.random() * 10 + 5;
                ctx.beginPath(); ctx.arc(x, y, size, 0, Math.PI*2); ctx.fill();
            }
            ctx.fillStyle = '#9f1239'; ctx.font = 'bold 24px Mali'; ctx.textAlign = 'center'; ctx.fillText("‡∏Ç‡∏π‡∏î‡πÄ‡∏•‡∏¢! ‚ù§Ô∏è", canvas.width/2, canvas.height/2);
            let isDrawing = false;
            function getPos(e) {
                const rect = canvas.getBoundingClientRect();
                let cx = e.clientX; let cy = e.clientY;
                if(e.touches && e.touches.length > 0) { cx = e.touches[0].clientX; cy = e.touches[0].clientY; }
                return { x: cx - rect.left, y: cy - rect.top };
            }
            function scratch(e) {
                if (!isDrawing) return;
                const pos = getPos(e); ctx.globalCompositeOperation = 'destination-out'; ctx.beginPath(); ctx.arc(pos.x, pos.y, 25, 0, Math.PI * 2); ctx.fill();
            }
            canvas.addEventListener('mousedown', (e) => { isDrawing = true; scratch(e); }); canvas.addEventListener('mousemove', scratch);
            canvas.addEventListener('mouseup', () => isDrawing = false); canvas.addEventListener('mouseleave', () => isDrawing = false);
            canvas.addEventListener('touchstart', (e) => { isDrawing = true; scratch(e); }, {passive: false}); canvas.addEventListener('touchmove', (e) => { scratch(e); e.preventDefault(); }, {passive: false});
            canvas.addEventListener('touchend', () => isDrawing = false);
        }

        // --- MEMORIES (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà) ---
        // üü¢üü¢üü¢ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏π‡∏õ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà üü¢üü¢üü¢
        const memories = [
            { 
                img: '1.jpg', 
                title: '‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏Å‡∏±‡∏ô', 
                desc: '‡πÄ‡∏£‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏≠‡∏≤‡∏•‡∏π‡∏Å‡∏≠‡∏°‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡πÄ‡∏•‡∏¢‡πÑ‡∏î‡πâ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢ ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÑ‡∏°‡πà‡∏ô‡∏≤‡∏ô‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏ó‡∏±‡∏Å‡πÑ‡∏õ‡∏à‡∏µ‡∏ö‡πÄ‡∏ò‡∏≠' 
            },
            { 
                img: '2.jpg', 
                title: '‡∏ô‡∏±‡∏ö‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡∏Ñ‡∏ö‡∏Å‡∏±‡∏ô‡∏°‡∏≤', 
                desc: ' ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏¢‡∏±‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡πÄ‡∏™‡∏°‡∏≠‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Ñ‡∏ö‡∏Å‡∏±‡∏ôüíó' 
            },
            { 
              // ___ img: 'https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?ixlib=rb-1.2.1&auto=format&fit=crop&w=400&q=80', 
                title: '‡∏ó‡∏£‡∏¥‡∏õ‡πÅ‡∏£‡∏Å', 
                desc: '' ___ // 
            },
            { 
                img: '3.jpg', 
                title: '‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡∏∞‡∏ï‡∏•‡∏≠‡∏î‡πÑ‡∏õ', 
                desc: '‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡∏ô‡∏≤‡∏ô‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô ‡∏Å‡πá‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏≤‡∏Å‡∏°‡∏µ‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô' 
            }
        ];
        // üü¢üü¢üü¢ ‡∏à‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥ üü¢üü¢üü¢

        let currentMemIndex = 0;
        function loadMemory(index) {
            const imgEl = document.getElementById('memory-img'); const titleEl = document.getElementById('memory-title'); const descEl = document.getElementById('memory-desc');
            const dotsContainer = document.getElementById('memory-dots');
            
            // Render Dots
            dotsContainer.innerHTML = '';
            memories.forEach((_, i) => {
                const dot = document.createElement('div');
                dot.className = `w-2 h-2 rounded-full transition-all dot-indicator ${i === index ? 'bg-rose-500 scale-125' : 'bg-rose-200'}`;
                dotsContainer.appendChild(dot);
            });

            imgEl.style.opacity = 0; imgEl.style.transform = 'scale(0.95)';
            setTimeout(() => {
                imgEl.src = memories[index].img; titleEl.textContent = memories[index].title; descEl.textContent = memories[index].desc;
                imgEl.style.opacity = 1; imgEl.style.transform = 'scale(1)';
            }, 300);
        }
        function nextMemory() { currentMemIndex = (currentMemIndex + 1) % memories.length; loadMemory(currentMemIndex); }
        function prevMemory() { currentMemIndex = (currentMemIndex - 1 + memories.length) % memories.length; loadMemory(currentMemIndex); }
        loadMemory(0);

        // --- LETTER ---
        function toggleLetter(el) { el.classList.toggle('open'); if(el.classList.contains('open')) { confetti({ particleCount: 40, spread: 50, origin: { y: 0.5 }, scalar: 0.8, colors: ['#ffe4e6', '#fda4af'] }); } }

        // --- QUIZ ---
        const questions = [
            { q: "‡πÄ‡∏£‡∏≤‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô?", a: "‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡πÅ‡∏ü", options: ["‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢", "‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡πÅ‡∏ü", "‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå", "‡∏á‡∏≤‡∏ô‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á"] },
            { q: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏ò‡∏≠‡∏ä‡∏≠‡∏ö‡∏Å‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ñ‡∏∑‡∏≠?", a: "‡∏ä‡∏≤‡∏ö‡∏π", options: ["‡∏ã‡∏π‡∏ä‡∏¥", "‡∏™‡πâ‡∏°‡∏ï‡∏≥", "‡∏ä‡∏≤‡∏ö‡∏π", "‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤"] },
            { q: "‡∏™‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏ò‡∏≠‡∏ä‡∏≠‡∏ö‡∏Ñ‡∏∑‡∏≠?", a: "‡∏ä‡∏°‡∏û‡∏π", options: ["‡∏ü‡πâ‡∏≤", "‡∏ä‡∏°‡∏û‡∏π", "‡∏Ç‡∏≤‡∏ß", "‡∏î‡∏≥"] },
            { q: "‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏Ñ‡∏∑‡∏≠?", a: "18 ‡∏™.‡∏Ñ.", options: ["14 ‡∏Å.‡∏û.", "18 ‡∏™.‡∏Ñ.", "1 ‡∏°.‡∏Ñ.", "25 ‡∏ò.‡∏Ñ."] },
            { q: "‡∏£‡∏±‡∏Å‡πÄ‡∏£‡∏≤‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?", a: "‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏•‡∏Å", options: ["‡πÄ‡∏â‡∏¢‡πÜ", "‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á", "‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏•‡∏Å", "‡πÑ‡∏°‡πà‡∏ö‡∏≠‡∏Å"] }
        ];
        let quizIndex = 0; let score = 0;
        function resetQuiz() { quizIndex = 0; score = 0; document.getElementById('quiz-result').classList.remove('flex'); document.getElementById('quiz-result').classList.add('hidden'); loadQuestion(); }
        function loadQuestion() {
            if(quizIndex >= questions.length) { showQuizResult(); return; }
            const qData = questions[quizIndex];
            document.getElementById('quiz-current').innerText = quizIndex + 1;
            const qEl = document.getElementById('quiz-question'); qEl.style.opacity = 0;
            setTimeout(() => { qEl.innerText = qData.q; qEl.style.opacity = 1; }, 200);
            const optionsDiv = document.getElementById('quiz-options'); optionsDiv.innerHTML = '';
            qData.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "w-full py-3 bg-white/80 rounded-xl shadow-sm border border-rose-100 text-rose-800 hover:bg-rose-50 transition-all transform active:scale-95";
                btn.style.animationDelay = `${i * 0.1}s`; btn.innerText = opt; btn.onclick = () => checkAnswer(opt, qData.a);
                optionsDiv.appendChild(btn);
            });
        }
        function checkAnswer(selected, correct) { if(selected === correct) score++; quizIndex++; loadQuestion(); }
        function showQuizResult() {
            document.getElementById('quiz-score-display').innerText = score;
            const msg = document.getElementById('quiz-msg');
            if(score === 5) msg.innerText = "‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î! ‡πÅ‡∏ü‡∏ô‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡πÅ‡∏ó‡πâ ‚ù§Ô∏è"; else if(score >= 3) msg.innerText = "‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å ‡∏£‡∏±‡∏Å‡∏ô‡∏∞‡∏à‡∏∏‡πä‡∏ö‡πÜ"; else msg.innerText = "‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏ô‡∏∞ ‡∏£‡∏±‡∏Å‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°";
            const res = document.getElementById('quiz-result'); res.classList.remove('hidden'); res.classList.add('flex');
            confetti({ particleCount: 150, spread: 70 });
        }

        // --- TIMER ---
        const startDate = new Date('2024-08-18T00:00:00'); // üü¢ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡∏ö (YYYY-MM-DD)
        let timerInterval;
        function startTimer() { if(timerInterval) clearInterval(timerInterval); updateTimerDisplay(); timerInterval = setInterval(updateTimerDisplay, 1000); }
        function updateTimerDisplay() {
            const now = new Date(); const diff = now - startDate; if (diff < 0) return;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            document.getElementById('timer-days').innerText = days; document.getElementById('timer-hours').innerText = String(hours).padStart(2, '0');
            document.getElementById('timer-minutes').innerText = String(minutes).padStart(2, '0'); document.getElementById('timer-seconds').innerText = String(seconds).padStart(2, '0');
        }

        // --- POLAROID ---
        function takePhoto() {
            const btn = document.getElementById('btn-snap'); const flash = document.getElementById('shutter-flash'); const result = document.getElementById('polaroid-result'); const dateText = document.getElementById('polaroid-date');
            if(navigator.vibrate) navigator.vibrate(50);
            flash.style.opacity = 1;
            setTimeout(() => {
                flash.style.opacity = 0; result.classList.remove('hidden'); dateText.classList.remove('hidden');
                btn.innerHTML = '<i data-lucide="check" class="text-white w-8 h-8"></i>'; btn.classList.add('bg-green-500', 'border-green-300'); btn.classList.remove('btn-primary');
                confetti({ particleCount: 50, spread: 40, origin: { y: 0.7 } });
            }, 150);
        }
        function resetPolaroid() {
            document.getElementById('polaroid-result').classList.add('hidden'); document.getElementById('polaroid-date').classList.add('hidden');
            const btn = document.getElementById('btn-snap'); btn.innerHTML = '<i data-lucide="aperture" class="w-8 h-8"></i>'; btn.classList.remove('bg-green-500', 'border-green-300'); btn.classList.add('btn-primary');
        }

        // --- MUSIC ---
        function playMusicState() { document.getElementById('vinyl').classList.remove('paused'); }

    </script>
</body>
</html>


